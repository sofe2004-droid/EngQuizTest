<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDFtoQuiz - íšŒì›ê°€ì…</title>
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
  <!-- ì»¤ìŠ¤í…€ CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <div class="container">
    <div class="login-container">
      <div class="text-center mb-4">
        <h1 class="display-4">ğŸ“š PDFtoQuiz</h1>
        <p class="text-muted">í€´ì¦ˆ í•™ìŠµ ê´€ë¦¬ ì‹œìŠ¤í…œ</p>
      </div>
      
      <div class="card shadow">
        <div class="card-body p-4">
          <h3 class="card-title text-center mb-4">
            <i class="bi bi-person-plus-fill"></i> íšŒì›ê°€ì…
          </h3>
          
          <!-- ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ -->
          {% if error %}
          <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <i class="bi bi-exclamation-triangle-fill"></i> {{ error }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
          {% endif %}
          
          <!-- íšŒì›ê°€ì… í¼ -->
          <form method="POST" action="{{ url_for('signup_process') }}" onsubmit="return validateForm()">
            <div class="mb-3">
              <label for="username" class="form-label">
                <i class="bi bi-person"></i> ì´ë¦„
              </label>
              <input type="text" 
                     class="form-control" 
                     id="username" 
                     name="username" 
                     placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” (ìµœì†Œ 2ì)"
                     value="{{ username if username else '' }}"
                     minlength="2"
                     required
                     autofocus>
              <div class="form-text">ì‹¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</div>
            </div>
            
            <div class="mb-3">
              <label for="password" class="form-label">
                <i class="bi bi-lock"></i> ë¹„ë°€ë²ˆí˜¸
              </label>
              <input type="password" 
                     class="form-control" 
                     id="password" 
                     name="password" 
                     placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ìµœì†Œ 4ì)"
                     minlength="4"
                     required>
              <div class="form-text">ìµœì†Œ 4ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.</div>
            </div>
            
            <div class="mb-4">
              <label for="password_confirm" class="form-label">
                <i class="bi bi-lock-fill"></i> ë¹„ë°€ë²ˆí˜¸ í™•ì¸
              </label>
              <input type="password" 
                     class="form-control" 
                     id="password_confirm" 
                     name="password_confirm" 
                     placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”"
                     minlength="4"
                     required>
              <div id="password-match-message" class="form-text"></div>
            </div>
            
            <div class="d-grid gap-2">
              <button type="submit" class="btn btn-success btn-lg">
                <i class="bi bi-check-circle"></i> ê°€ì…í•˜ê¸°
              </button>
              <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left"></i> ë¡œê·¸ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°
              </a>
            </div>
          </form>
        </div>
      </div>
      
      <!-- ì•ˆë‚´ ë©”ì‹œì§€ -->
      <div class="text-center mt-3">
        <small class="text-white-50">
          <i class="bi bi-info-circle"></i> 
          ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? 
          <a href="{{ url_for('index') }}" class="text-white fw-bold">ë¡œê·¸ì¸</a>
        </small>
      </div>
    </div>
  </div>
  
  <!-- Bootstrap 5 JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    const password = document.getElementById('password');
    const passwordConfirm = document.getElementById('password_confirm');
    const message = document.getElementById('password-match-message');
    
    // ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì‹¤ì‹œê°„ ì²´í¬
    function checkPasswordMatch() {
      if (passwordConfirm.value === '') {
        message.textContent = '';
        message.className = 'form-text';
        return;
      }
      
      if (password.value === passwordConfirm.value) {
        message.textContent = 'âœ“ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•©ë‹ˆë‹¤.';
        message.className = 'form-text text-success';
        passwordConfirm.classList.remove('is-invalid');
        passwordConfirm.classList.add('is-valid');
      } else {
        message.textContent = 'âœ— ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
        message.className = 'form-text text-danger';
        passwordConfirm.classList.remove('is-valid');
        passwordConfirm.classList.add('is-invalid');
      }
    }
    
    password.addEventListener('input', checkPasswordMatch);
    passwordConfirm.addEventListener('input', checkPasswordMatch);
    
    // í¼ ì œì¶œ ì‹œ ê²€ì¦
    function validateForm() {
      const username = document.getElementById('username').value.trim();
      const pwd = password.value;
      const pwdConfirm = passwordConfirm.value;
      
      if (username.length < 2) {
        alert('ì´ë¦„ì€ ìµœì†Œ 2ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
        return false;
      }
      
      if (pwd.length < 4) {
        alert('ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 4ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
        return false;
      }
      
      if (pwd !== pwdConfirm) {
        alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
        return false;
      }
      
      return true;
    }
  </script>
</body>
</html>
